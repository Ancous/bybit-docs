- [Что такое SMP?](#что-такое-smp)
- [Как настроить SMP?](#как-настроить-smp)
- [Что такое SMP Trade Group?](#что-такое-smp-trade-group)
- [Как управлять моими UID и SMP Trade Group?](#как-управлять-моими-uid-и-smp-trade-group)

<a id="что-такое-smp"></a>

## Что такое SMP?

Функция Self Match Prevention позволяет пользователям выбирать способ исполнения при размещении ордера.
Когда контрагент — тот же самый UID или принадлежит к той же указанной группе SMP, исполнение происходит
следующим образом:

- Cancel maker: отменить мейкер-ордер при исполнении; тейкер-ордер остаётся.
- Cancel taker: отменить тейкер-ордер при исполнении; мейкер-ордер остаётся.
- Cancel both: отменить оба — и тейкер, и мейкер — при исполнении.
  
После того как ордер размещён в книге ордеров, его smpType становится недействительным. Это означает, например, что
если вы размещаете тейкер-ордер без smpType (`smpType=None`), который совпадает с вашим существующим мейкер-ордером,
установленным с `smpType=CancelMaker`, тейкер-ордер будет исполнен. Это происходит потому, что `smpType=CancelMaker` у
мейкер-ордера становится недействительным после попадания в книгу ордеров.

<a id="как-настроить-smp"></a>

## Как настроить SMP?

Проверьте параметры запроса [Place Order](#). Укажите параметр `smpType` при размещении ордера.

<a id="что-такое-smp-trade-group"></a>

## Что такое SMP Trade Group? (Группа торговли SMP)

SMP доступен для любого пользователя на уровне UID.
Управление SMP Trade Group в настоящее время доступно только для учреждений.

SMP Trade Group: относится к группе UID. Когда любой из UID в этой группе размещает ордер и выбрана политика исполнения
SMP, она будет активирована, если мейкер-ордер под любым из UID в этой группе будет совпасть.

Подробности:

- Каждый UID может входить только в одну SMP Trade Group.
- SMP Trade Group является группой управления на уровне UID, поэтому когда основной аккаунт присоединяется к
  SMP Trade Group, все субаккаунты под этим основным аккаунтом автоматически присоединятся к данной группе торговли.
- Если основной аккаунт уже присоединился к SMP Trade Group и субаккаунт создан после этого, этот новый субаккаунт
  автоматически присоединится к той же SMP Trade Group по умолчанию.
- Субаккаунт не обязательно должен быть привязан к той же SMP Trade Group, что и основной аккаунт. Это только поведение
  по умолчанию. Его можно вручную перевести в другие группы при необходимости.
- Связь между SMP Trade Group и UID может изменяться: когда UID присоединяется к новой SMP Trade Group или удаляется
  из SMP Trade Group. Эта операция не влияет на существующие ордера, она влияет только на вновь размещаемые ордера
  после изменения связи.
- Заметки: На основе этого мы настоятельно рекомендуем, что при изменении SMP Trade Group вы должны отменить все
  существующие ордера, чтобы избежать неожиданного исполнения.

Приоритет SMP Trade Group выше в исполнении SMP, поэтому индивидуальный UID учитывается только при отсутствии
SMP Trade Group на любой стороне.

После того как ордер находится в книге ордеров, его флаг SMP больше не имеет значения. Система всегда следует тегу на
последнем ордере.

***Примеры:***  
1 января: UID1 присоединяется к SMP Trade Group A и размещает Order1.  
2 января: UID1 удаляется из SMP Trade Group A, но Order1 всё ещё активен и "новый".

- Кейс 1: Если UID1 присоединился к SMP Trade Group B и разместил Order2, если Order2 встречает Order1, он будет
  исполнен, поскольку они принадлежат к двум разным группам.
- Кейс 2: Если UID1 не присоединился к другим группам после удаления из SMP Trade Group A и разместил Order2, если
  Order2 встречает Order1, SMP будет активирован, потому что UID1 не имел группы при размещении Order2, поэтому SMP
  был активирован на уровне UID (тот же UID1).

<a id="как-управлять-моими-uid-и-smp-trade-group"></a>

## Как управлять моими UID и SMP Trade Group?

Вы можете связаться с вашим менеджером по институциональным вопросам или отправить email Bybit на:
<institutional_services@bybit.com>.
