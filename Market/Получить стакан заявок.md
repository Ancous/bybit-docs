- [Информация](#информация)
- [Конечная точка](#конечная-точка)
- [Примеры запроса](#примеры-запроса)
- [Параметры запроса](#параметры-запроса)
- [Примеры ответа](#примеры-ответа)
- [Параметры ответа](#параметры-ответа)

<a id="информация"></a>

Запрос данных стакана.

>Охватывает:  
>Спот / USDT контракт / USDC контракт / Inverse контракт / Опцион

Contract: глубина стакана — до 1000 уровней  
Spot: глубина стакана — до 1000 уровней  
Option: глубина стакана — до 25 уровней

>Информация:  
>
>- Ответ приходит в формате снимка (snapshot).
>- Заказы [Retail Price Improvement (RPI)](https://www.bybit.com/en/help-center/article/Retail-Price-Improvement-RPI-Order)
> не включаются в ответ и не видны черезAPI.

<a id="конечная-точка"></a>

## Конечная точка

`/v5/market/orderbook`

<a id="примеры-запроса"></a>

## Примеры запроса

- HTTP

  ```bash
  GET /v5/market/orderbook?category=spot&symbol=BTCUSDT HTTP/1.1
  Host: api-testnet.bybit.com
  ```

- Python

  ```python
  import requests

  base_url = "https://api-testnet.bybit.com"
  end_point = "/v5/market/orderbook"

  complete_request = base_url + end_point
  parameters = {
      "category": "linear",
      "symbol": "BTCUSDT",
  }
  
  response = requests.get(url=complete_request, params=parameters, timeout=10)

  print(response.json())
  ```

- pybit

  ```python
  from pybit.unified_trading import HTTP

  session = HTTP(testnet=True)
  print(session.get_orderbook(
      category="linear",
      symbol="BTCUSDT",
  ))
  ```

<a id="параметры-запроса"></a>

## Параметры запроса

<table class="iksweb">
		<tr>
			<td><b>Параметр</b></td>
			<td><b>Обязательный</b></td>
			<td><b>Тип</b></td>
			<td><b>Комментарии</b></td>
			<td><b>По умолчанию</b></td>
		</tr>
		<tr>
			<td><a href="../99.Определения значений в запросах и ответах.md#category">category</a></td>
			<td>да</td>
			<td>string</td>
			<td>Тип продукта: <code>spot</code>, <code>linear</code>, <code>inverse</code>, <code>option</code></td>
			<td>-</td>
		</tr>
		<tr>
			<td><a href="../99.Определения значений в запросах и ответах.md#symbol">symbol</a></td>
			<td>да</td>
			<td>string</td>
			<td>Название символа, например <code>BTCUSDT</code>, только заглавные буквы</td>
			<td>-</td>
		</tr>
		<tr>
			<td rowspan="4">limit</td>
			<td rowspan="4">нет</td>
			<td rowspan="4">integer</td>
			<td colspan="2"><b>Ограничение количества уровней заявок для каждой стороны (bid и ask)</b></td>
		</tr>
		<tr>
			<td><code>spot</code>: от <code>1</code> до <code>200</code></td>
			<td><code>1</code></td>
		</tr>
		<tr>
			<td><code>linear</code> и <code>inverse</code>: от <code>1</code> до <code>500</code></td>
			<td><code>25</code></td>
		</tr>
		<tr>
			<td><code>option</code>: от <code>1</code> до <code>25</code></td>
			<td><code>1</code></td>
		</tr>
</table>

<a id="примеры-ответа"></a>

## Пример ответа

```json
{
    "retCode": 0,
    "retMsg": "OK",
    "result": {
        "s": "BTCUSDT",
        "a": [
            [
                "65557.7",
                "16.606555"
            ]
        ],
        "b": [
            [
                "65485.47",
                "47.081829"
            ]
        ],
        "ts": 1716863719031,
        "u": 230704,
        "seq": 1432604333,
        "cts": 1716863718905
    },
    "retExtInfo": {},
    "time": 1716863719382
}
```

<a id="параметры-ответа"></a>

## Параметры ответа

|Параметр  |Тип       |Комментарии                                                                                                                                                                 |
|----------|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|s         |string    |Название символа                                                                                                                                                            |
|b         |array     |Bid — заявки покупателей. Отсортированы по цене по убыванию                                                                                                                 |
|b[0]      |string    |Цена заявки покупателя                                                                                                                                                      |
|b[1]      |string    |Цена заявки покупателя                                                                                                                                                      |
|a         |array     |Ask — заявки продавцов. Отсортированы по цене по возрастанию                                                                                                                |
|a[0]      |string    |Цена заявки продавца                                                                                                                                                        |
|a[1]      |string    |Объём заявки продавца                                                                                                                                                       |
|ts        |integer   |Временная метка (timestamp) в миллисекундах, когда система сгенерировала эти данные                                                                                         |
|u         |integer   |ID обновления, всегда последовательный                                                                                                                                      |
|seq       |integer   |Кросс-последовательность (Cross sequence). Можно использовать для сравнения данных стакана на разных уровнях; меньшее значение seq означает более ранние данные             |
|cts       |integer   |Временная метка от движка сопоставления сделок (matching engine), когда были созданы данные стакана. Может коррелировать с параметром T из [публичного канала сделок](#)    |
