- [Информация](#информация)
- [Конечная точка](#конечная-точка)
- [Примеры запроса](#примеры-запроса)
- [Параметры запроса](#параметры-запроса)
- [Пример ответа](#пример-ответа)
- [Параметры ответа](#параметры-ответа)

<a id="информация"></a>

Запрос данных по длинным и коротким позициям

>Зона применения:  
>
>`linear` - контракт (расчет в USDT, USDC, ...)
>
> - `Perpetual` - контракт без даты экспирации
> - `Futures` - контракт с датой экспирации
>
>`inverse` - контракт (расчет в BTC, ETH, ...)
>
> - `Perpetual` - контракт без даты экспирации
> - `Futures` - контракт с датой экспирации

<a id="конечная-точка"></a>

## Конечная точка

`/v5/market/account-ratio`

<a id="примеры-запроса"></a>

## Примеры запроса

- HTTP

  ```http
  GET /v5/market/account-ratio?category=linear&symbol=BTCUSDT&period=1h&limit=2&startTime=1696089600000&endTime=1696262400000 HTTP/1.1
  Host: api-testnet.bybit.com
  ```

- requests

  ```python
  import requests

  base_url = "https://api-testnet.bybit.com"
  end_point = "/v5/market/account-ratio"

  complete_request = base_url + end_point
  parameters = {
      "category": "linear",
      "symbol": "BTCUSDT",
      "period": "1h",
      "limit": 2,
      "startTime": "1696089600000",
      "endTime": "1696262400000"
  }
  
  response = requests.get(url=complete_request, params=parameters, timeout=10)

  print(response.json())
  ```

- pybit

  ```python
  from pybit.unified_trading import HTTP

  session = HTTP(testnet=True)
  print(session.get_long_short_ratio(
      category="linear",
      symbol="BTCUSDT",
      period="1h",
      limit=2,
      startTime="1696089600000",
      endTime="1696262400000",
  ))
  ```

<a id="параметры-запроса"></a>

## Параметры запроса

|Параметр  	                  |Обязательный	 |Тип   	  |Комментарии                       |По умолчанию|
|-----------------------------|--------------|------------|----------------------------------|------------|
|[category](<../19.Определения значений в запросах и ответах.md#category>)	|да           |string    |***Тип продукта.***<br><br>`linear` (USDT), `inverse`          |-           |
|[symbol](<../19.Определения значений в запросах и ответах.md#symbol>)	    |да          |string    |***Имя символа.***<br><br>`BTCUSDT`, только заглавными буквами                         |-           |
|[period](<../19.Определения значений в запросах и ответах.md#dataRecordingPeriod>)    |да	  |string   	  |***Период регистрации данных.***                       |-   |
|startTime  	                  |нет	 |string   	  |***Временная метка начала выборки (в миллисекундах)***                       |-|
|endTime  	                  |нет	 |string   	  |***Временная метка конца выборки (в миллисекундах)***                      |-|
|limit  	                  |нет	 |integer   	  |***Ограничение размера данных на странице.***<br><br>[`1`, `500`]                       |`50`|
|cursor  	                  |нет	 |string   	  |***Курсор.***<br><br>Используйте значение `nextPageCursor` из ответа для получения следующей страницы набора результатов        |-  |

<a id="пример-ответа"></a>

## Пример ответа

```json
{
    "retCode": 0,
    "retMsg": "OK",
    "result": {
        "list": [
            {
                "symbol": "BTCUSDT",
                "buyRatio": "0.49",
                "sellRatio": "0.51",
                "timestamp": "1696262400000"
            },
            {
                "symbol": "BTCUSDT",
                "buyRatio": "0.4927",
                "sellRatio": "0.5073",
                "timestamp": "1696258800000"
            }
        ],
        "nextPageCursor": "lastid%3D0%26lasttime%3D1696258800"
    },
    "retExtInfo": {},
    "time": 1731567491688
}
```

<a id="параметры-ответа"></a>

## Параметры ответа

|Параметр  |Тип       |Комментарии                                             |
|----------|----------|--------------------------------------------------------|
|list  |array       |Массив объектов                                               |
|symbol  |string       |Название символа                                             |
|buyRatio  |string       |Соотношение количества длинных позиций                                             |
|sellRatio  |string       |Соотношение количества коротких позиций                                             |
|timestamp  |string       |Временная метка                                             |
|nextPageCursor  |string       |Метка для следующей страницы (используется в параметре запроса `cursor` для пагинации)        |
