- [Ограничение IP](#ограничение-ip)
  - [Ограничение IP для HTTP](#ограничение-ip-для-http)
  - [Ограничение IP для Websocket](#ограничение-ip-для-websocket)
- [Лимиты API](#лимиты-api)
  - [Таблицы лимитов](#таблицы-лимитов)
    - [Торговля](#торговля)
    - [Позиция](#позиция)
    - [Аккаунт](#аккаунт)
    - [Активы](#активы)
    - [Пользователь](#пользователь)
    - [Спотовая маржинальная торговля](#спотовая-маржинальная-торговля)
    - [Спредовая торговля](#спредовая-торговля)

<a id="ограничение-ip"></a>

## Ограничение IP

<a id="ограничение-ip-для-http"></a>

### Ограничение IP для HTTP

По умолчанию вам разрешено отправлять 600 запросов в течение 5-секундного окна с одного IP-адреса. Это ограничение
применяется ко всему трафику, направленному на `api.bybit.com`, `api.bybick.com` и локальные домены, такие как
`api.bybit.kz`.Если вы получите ошибку "403, access too frequent" — это значит, что ваш IP превысил допустимую частоту
запросов. В таком случае нужно завершить все HTTP-сессии и подождать минимум 10 минут. Блокировка снимется автоматически.

Мы не рекомендуем запускать ваше приложение на самом пределе этих лимитов, чтобы случайная аномальная сеть не вызвала
неожиданного нарушения

<a id="ограничение-ip-для-websocket"></a>

### Ограничение IP для Websocket

- Не устанавливайте более 500 подключений за 5-минутный интервал. Это ограничение действует ко всем подключениям на
  `stream.bybit.com` и локальным хостам типа `stream.bybit.kz`.
- Не создавайте частых подключений и разрывов соединения.
- Не устанавливайте более 1000 подключений на один IP для получения рыночных данных. Ограничения подсчитываются отдельно
  для рынков `spot`, `linear`, `inverse` и `options`.

<a id="лимиты-api"></a>

## Лимиты API

> Внимание!  
> Если вы получаете в ответ JSON с `"retCode": 10006 и "retMsg": "Too many visits!"`, значит, вы превысили лимит по
> частоте запросов API.

Лимит API считается по скользящему окну времени в секунду на пользователя (UID). Иными словами — лимит действует
в секунду на одного пользователя.

Каждый запрос к API возвращает в HTTP-ответе заголовки, которые выглядят так:

- `X-Bapi-Limit-Status` — оставшееся количество запросов для текущего эндпоинта  
- `X-Bapi-Limit` — ваш текущий лимит для текущего эндпоинта  
- `X-Bapi-Limit-Reset-Timestamp` — время (в миллисекундах), когда сбросится лимит, если вы его превысили. Если лимит
  не превышен, это текущее время (может немного отличаться от точного `timeNow`).

Пример HTTP-заголовков ответа:

```bash
Content-Type: application/json; charset=utf-8
Content-Length: 141
X-Bapi-Limit: 100
X-Bapi-Limit-Status: 99
X-Bapi-Limit-Reset-Timestamp: 1672738134824
```

<a id="инструкция-для-запроса-с-пакетом-ордеров"></a>

> Инструкция для запроса с пакетом ордеров:
>
> Пакетный запрос ордеров, который включает операции создания, изменения и отмены, имеет собственное ограничение по
> скорости (rate limit) и не разделяет его с обычными одиночными запросами. Например, если ограничение на создание
> одиночных ордеров составляет 100 запросов в секунду, а ограничение на пакетный запрос ордеров — тоже 100 запросов в
> секунду, то в сумме можно создать 200 ордеров в секунду, используя оба этих эндпоинта.
>
> Если category  = `linear`, `inverse` или `spot`
>
> - API пакетного запроса ордеров создания/изменения/отмены работает согласно текущей конфигурации частоты вызовов.
> Однако расход лимита учитывается в зависимости от фактического количества ордеров
> (расход лимита = количество запросов * количество ордеров в одном запросе). Конфигурация лимитов для разных
> бизнес-направлений независима друг от друга.
>
> - API пакетного запроса ордеров позволяет отправлять от 1 до 10 ордеров в одном запросе. Например, если в пакетном
> запросе отправлено 5 ордеров, то расход лимита составит 5.
>
> - Если часть пакетного запроса ордеров, запрошенных в течение 1 с, превысит лимит, та часть, которая превысит лимит,
> будет отклонена, а та часть, которая не превысит лимит, выполниться успешно. Например, за 1 секунду оставшийся
> лимит равен 5, но в это время размещается пакетный запрос, содержащий 8 ордеров, то первые 5 ордеров будут успешно
> размещены, а 6–8-й ордера сообщат об ошибке превышения лимита, и эти ордера будут отклонены.

<a id="таблицы-лимитов"></a>

### Таблицы лимитов

<a id="торговля"></a>

#### Торговля

<table class="iksweb">
		<tr>
			<td rowspan="2"><b>HTTP метод</b></td>
   			<td rowspan="2"><b>Конечная точка</b></td>
			<td colspan="4" align="center"><b>Аккаунт UTA2.0 PRO</b></td>
			<td rowspan="2"><b>Обновляемый</b></td>
		</tr>
		<tr>
			<td><b>inverse</b></td>
			<td><b>linear</b></td>
			<td><b>option</b></td>
			<td><b>spot</b></td>
		</tr>
		<tr>
			<td rowspan="8">POST</td>
			<td>/v5/order/create</td>
			<td colspan="2" align="center">10/сек.</td>
			<td>10/сек.</td>
			<td>20/сек.</td>
			<td>Да</td>
		</tr>
		<tr>
			<td>/v5/order/amend</td>
			<td colspan="2" align="center">10/сек.</td>
			<td>10/сек.</td>
			<td>10/сек.</td>
			<td>Да</td>
		</tr>
		<tr>
			<td>/v5/order/cancel</td>
			<td colspan="2" align="center">10/сек.</td>
			<td>10/сек.</td>
			<td>20/сек.</td>
			<td>Да</td>
		</tr>
		<tr>
			<td>/v5/order/cancel-all</td>
			<td colspan="2" align="center">10/сек.</td>
			<td>1/сек.</td>
			<td>20/сек.</td>
			<td>Да</td>
		</tr>
		<tr>
			<td>/v5/order/create-batch</td>
			<td colspan="2" align="center">10/сек.</td>
			<td>10/сек.</td>
			<td>20/сек.</td>
			<td>Да</td>
		</tr>
		<tr>
			<td>/v5/order/amend-batch</td>
			<td colspan="2" align="center">10/сек.</td>
			<td>10/сек.</td>
			<td>20/сек.</td>
			<td>Да</td>
		</tr>
		<tr>
			<td>/v5/order/cancel-batch</td>
			<td colspan="2" align="center">10/сек.</td>
			<td>10/сек.</td>
			<td>20/сек.</td>
			<td>Да</td>
		</tr>
		<tr>
			<td>/v5/order/disconnected-cancel-all</td>
			<td colspan="4" align="center">5/сек.</td>
			<td>Нет</td>
		</tr>
		<tr>
			<td rowspan="4">GET</td>
			<td>/v5/order/realtime</td>
			<td colspan="4" align="center">50/сек.</td>
			<td>Нет</td>
		</tr>
		<tr>
			<td>/v5/order/history</td>
			<td colspan="4" align="center">50/сек.</td>
			<td>Нет</td>
		</tr>
		<tr>
			<td>/v5/execution/list</td>
			<td colspan="4" align="center">50/сек.</td>
			<td>Нет</td>
		</tr>
		<tr>
			<td>/v5/order/spot-borrow-check</td>
			<td colspan="3" align="center">-</td>
			<td>50/сек.</td>
			<td>Нет</td>
		</tr>
</table>

<a id="позиция"></a>

#### Позиция

<table class="iksweb">
		<tr>
			<td rowspan="2"><b>HTTP метод</b></td>
       		<td rowspan="2"><b>Конечная точка</b></td>
			<td colspan="4" align="center"><b>Аккаунт UTA2.0 PRO</b></td>
			<td rowspan="2"><b>Обновляемый</b></td>
		</tr>
		<tr>
			<td><b>inverse</b></td>
			<td><b>linear</b></td>
			<td><b>option</b></td>
			<td><b>spot</b></td>
		</tr>
		<tr>
			<td rowspan="2">GET</td>
			<td>/v5/position/list</td>
			<td colspan="3" align="center">50/сек.</td>
			<td align="center">-</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/position/closed-pnl</td>
			<td colspan="2" align="center">50/сек.</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>POST</td>
			<td>/v5/position/set-leverage</td>
			<td>10/сек.</td>
			<td>10/сек.</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>нет</td>
		</tr>
</table>

<a id="аккаунт"></a>

#### Аккаунт

<table class="iksweb">
	<tbody>
		<tr>
			<td><b>HTTP метод</b></td>
			<td><b>Конечная точка</b></td>
			<td></td>
			<td><b>Лимит</b></td>
			<td><b>Обновляемый</b></td>
		</tr>
		<tr>
			<td rowspan="12">GET</td>
			<td>/v5/account/wallet-balance</td>
			<td>accountType=UNIFIED</td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/account/withdrawal</td>
			<td></td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/account/borrow-history</td>
			<td></td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/account/borrow</td>
			<td></td>
			<td>1/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/account/repay</td>
			<td></td>
			<td>1/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/account/no-convert-repay</td>
			<td></td>
			<td>1/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/account/collateral-info</td>
			<td></td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/coin-greeks</td>
			<td></td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/account/transaction-log</td>
			<td>accountType=UNIFIED</td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td rowspan="3">/v5/account/fee-rate</td>
			<td>category=linear</td>
			<td>10/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>category=spot</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>category=option</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
	</tbody>
</table>

<a id="активы"></a>

#### Активы

<table class="iksweb">
	<tbody>
		<tr>
			<td><b>HTTP метод</b></td>
			<td><b>Конечная точка</b></td>
			<td><b>Лимит</b></td>
			<td><b>Обновляемый</b></td>
		</tr>
		<tr>
			<td rowspan="13">GET</td>
			<td>/v5/asset/transfer/query-asset-info</td>
			<td>60/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/transfer/query-transfer-coin-list</td>
			<td>60/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/transfer/query-inter-transfer-list</td>
			<td>60/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/transfer/query-sub-member-list</td>
			<td>60/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/transfer/query-universal-transfer-list</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/transfer/query-account-coins-balance</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/deposit/query-record</td>
			<td>100/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/deposit/query-sub-member-record</td>
			<td>300/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/deposit/query-address</td>
			<td>300/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/deposit/query-sub-member-address</td>
			<td>300/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/withdraw/query-record</td>
			<td>300/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/coin/query-info</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/exchange/order-record</td>
			<td>600/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td rowspan="5">POST</td>
			<td>/v5/asset/transfer/inter-transfer</td>
			<td>60/мин.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/transfer/save-transfer-sub-member</td>
			<td>20/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/transfer/universal-transfer</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/withdraw/create</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/asset/withdraw/cancel</td>
			<td>60/мин.</td>
			<td>нет</td>
		</tr>
	</tbody>
</table>

<a id="пользователь"></a>

#### Пользователь

<table class="iksweb">
	<tbody>
		<tr>
			<td><b>HTTP метод</b></td>
			<td><b>Конечная точка</b></td>
			<td><b>Лимит</b></td>
			<td><b>Обновляемый</b></td>
		</tr>
		<tr>
			<td rowspan="7">GET</td>
			<td>v5/user/create-sub-member</td>
			<td>1/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/user/create-sub-api</td>
			<td>1/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/user/frozen-sub-member</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/user/update-api</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/user/update-sub-api</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/user/delete-api</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/user/delete-sub-api</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td rowspan="3">POST</td>
			<td>/v5/user/query-sub-members</td>
			<td>10/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/user/query-api</td>
			<td>10/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td>/v5/user/aff-customer-info</td>
			<td>10/сек.</td>
			<td>нет</td>
		</tr>
	</tbody>
</table>

<a id="спотовая-маржинальная-торговля"></a>

#### Спотовая маржинальная торговля

На данный момент нет ограничений на количество конечных точек в этой категории.

<a id="спредовая-торговля"></a>

#### Спредовая торговля

<table class="iksweb">
	<tbody>
		<tr>
			<td><b>HTTP метод</b></td>
			<td><b>Конечная точка</b></td>
			<td><b>Лимит</b></td>
			<td><b>Обновляемый</b></td>
		</tr>
		<tr>
			<td rowspan="4">POST</td>
			<td href="#">Create Spread Order</td>
			<td>20/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td href="#">Amend Spread Order</td>
			<td>20/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td href="#">Cancel Spread Order</td>
			<td>20/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td href="#">Cancel All Spread Orders</td>
			<td>5/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td rowspan="3">GET</td>
			<td href="#">Get Spread Open Orders</td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td href="#">Get Spread Order History</td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
		<tr>
			<td href="#">Get Spread Trade History</td>
			<td>50/сек.</td>
			<td>нет</td>
		</tr>
	</tbody>
</table>
