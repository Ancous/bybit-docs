- [Информация](#информация)
- [Поток данных](#поток-данных)
- [Подписка](#подписка)
- [Примеры подписки](#примеры-подписки)
- [Пример ответа при удачной подписки](#пример-ответа-при-удачной-подписки)
- [Пример получаемых данных](#пример-получаемых-данных)
- [Параметры получаемых данных](#параметры-получаемых-данных)

<a id="информация"></a>

Подписка на состояние системы в случае возникновения инцидента, требующего обслуживания или ремонта платформы.

<a id="поток-данных"></a>

## Поток данных

`system.status`

<a id="подписка"></a>

## Подписка

```json
{
    "op": "subscribe",
    "args": [
        "system.status"
    ]
}
```

<a id="примеры-подписки"></a>

## Примеры подписки

- собственная реализация

  ```python
  import json
  import time
  import websocket
  
  URL = "wss://stream-testnet.bybit.com/v5/public/misc/status"
  
  def on_message(ws, message):
      print(f"Полученное сообщение: {message}")
  
  def on_error(ws, error):
      print(f"Ошибка: {error}")
  
  def on_close(ws, close_status_code, close_msg):
      print(f"Соединение закрыто: {close_status_code} {close_msg}")
  
  def on_open(ws):
      print("Соединение открыто")
      request = {
          "op": "subscribe",
          "args": [
              "system.status"
          ]
      }
      ws.send(json.dumps(request))
  
  def run_websocket():
      while True:
          ws = websocket.WebSocketApp(URL)
          ws.on_message = on_message
          ws.on_error = on_error
          ws.on_close = on_close
          ws.on_open = on_open
  
          ws.run_forever(
              ping_interval=20,
              ping_timeout=5
          )
  
          print("Соединение потеряно. Попытка переподключения...")
          time.sleep(5)
  
  run_websocket()
  ```

<a id="пример-ответа-при-удачной-подписки"></a>

## Пример ответа при удачной подписки

```json
{
    "success": true,
    "conn_id": "3fcfcfd6-1e93-4074-84e5-64b57e2c62a9",
    "data": {
        "failTopics": [],
        "successTopics": [
            "system.status"
        ]
    },
    "type": "COMMAND_RESP"
}
```

<a id="пример-получаемых-данных"></a>

## Пример получаемых данных

```json
{
    "topic": "system.status",
    "ts": 1751858399649,
    "data": [
        {
            "id": "4d95b2a0-587f-11f0-bcc9-56f28c94d6ea",
            "title": "t06",
            "state": "completed",
            "begin": "1751596902000",
            "end": "1751597011000",
            "href": "",
            "serviceTypes": [
                2,
                3,
                4,
                5
            ],
            "product": [
                1,
                2
            ],
            "uidSuffix": [],
            "maintainType": 1,
            "env": 1
        }
    ]
}
```

<a id="параметры-получаемых-данных"></a>

## Параметры получаемых данных

|Параметр  |Тип       |Комментарии                                             |
|----------|----------|--------------------------------------------------------|
|topic     |string    |Название потока данных |
|ts        |number    |Метка времени (в миллисекундах), когда система генерирует данные |
|data      |array     |Массив объектов |
|id | string | Идентификатор. Уникальный идентификатор |
|title | string | Название обслуживания |
|[state](</19.Определения значений в запросах и ответах.md#state>) | string | Состояние системы |
|begin | string | Время начала обслуживания в формате timestamp (миллисекунды)  |
|end | string | Время окончания обслуживания в формате timestamp (миллисекунды). До окончания — прогнозируемое, после — фактическое. |
|href | string | Ссылка на подробности обслуживания. По умолчанию пустая строка |
|[serviceTypes](</19.Определения значений в запросах и ответах.md#serviceTypes>)  |array      |Типы сервисов, которые затрагивает обслуживание                                                        |
|[product](</19.Определения значений в запросах и ответах.md#product>)            |array     |Затронутые продукты                                                                                                   |
|uidSuffix | array | Затронутые конечные номера UID пользователей |
|[maintainType](</19.Определения значений в запросах и ответах.md#maintainType>)  |string          |Тип технического обслуживания                                                                                         |
|[env](</19.Определения значений в запросах и ответах.md#env>)                    |string    	   |Окружение (Environment), в котором проводится обслуживание                                                            |
  