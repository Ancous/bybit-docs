- [Информация](#информация)
- [Конечная точка](#конечная-точка)
- [Примеры запроса](#примеры-запроса)
- [Параметры запроса](#параметры-запроса)
- [Примеры ответа](#примеры-ответа)
- [Параметры ответа](#параметры-ответа)

<a id="информация"></a>

Запрос на размешение ордера

>Зона применения:  
>`spot`
>
> - Спот
>
>`linear`
>
> - Фьючерс USDT/USDC без даты экспирации  
> - Фьючерс USDT/USDC с датой экспирации
>
>`inverse`
>
> - Обратный Фьючерс без даты экспирации
> - Обратный Фьючерс с датой экспирации
>
>`option`
>
> - Опцион

<a id="конечная-точка"></a>

## Конечная точка

`/v5/order/create`

<a id="примеры-запроса"></a>

## Примеры запроса

- HTTP

  ```http
  POST /v5/order/create HTTP/1.1
  Host: api-testnet.bybit.com
  X-BAPI-API-KEY: "<api_key от биржи bybit>"
  X-BAPI-SIGN: <подпись>
  X-BAPI-TIMESTAMP: 1672211928338
  X-BAPI-RECV-WINDOW: 5000
  Content-Type: application/json

  // Спотовый лимитный ордер с рыночным тейк-профит и стоп-лосс
  {
      "category": "spot",
      "symbol": "BTCUSDT",
      "side": "Buy",
      "orderType": "Limit",
      "qty": "0.01",
      "price": "28000",
      "timeInForce": "PostOnly",
      "takeProfit": "35000",
      "stopLoss": "27000",
      "tpOrderType": "Market",
      "slOrderType": "Market"
  }

  // Спотовый лимитный ордер с лимитным тейк-профит и стоп-лосс
  {
      "category": "spot",
      "symbol": "BTCUSDT",
      "side": "Buy",
      "orderType": "Limit",
      "qty": "0.01",
      "price": "28000",
      "timeInForce": "PostOnly",
      "takeProfit": "35000",
      "stopLoss": "27000",
      "tpLimitPrice": "36000",
      "slLimitPrice": "27500",
      "tpOrderType": "Limit",
      "slOrderType": "Limit"
  }

  // Спотовый обычный ордер PostOnly
  {
      "category": "spot",
      "symbol": "BTCUSDT",
      "side": "Buy",
      "orderType": "Limit",
      "qty": "0.1",
      "price": "15600",
      "timeInForce": "PostOnly",
      "orderLinkId": "spot-test-01",
      "isLeverage": 0,
      "orderFilter": "Order"
  }

  // Спотовый ордер тейк-профит и стоп-лосс
  {
      "category": "spot",
      "symbol": "BTCUSDT",
      "side": "Buy",
      "orderType": "Limit",
      "qty": "0.1",
      "price": "15600",
      "triggerPrice": "15000",
      "timeInForce": "Limit",
      "orderLinkId": "spot-test-02",
      "isLeverage": 0,
      "orderFilter": "tpslOrder"
  }

  // Спотовый обычный маржинальный ордер (UTA)
  {
      "category": "spot",
      "symbol": "BTCUSDT",
      "side": "Buy",
      "orderType": "Limit",
      "qty": "0.1",
      "price": "15600",
      "timeInForce": "GTC",
      "orderLinkId": "spot-test-limit",
      "isLeverage": 1,
      "orderFilter": "Order"
  }

  // Спотовый ордер, количество указано в валюте котировки
  {
      "category": "spot",
      "symbol": "BTCUSDT",
      "side": "Buy",
      "orderType": "Market",
      "qty": "200",
      "timeInForce": "IOC",
      "orderLinkId": "spot-test-04",
      "isLeverage": 0,
      "orderFilter": "Order"
  }

  // Открытие длинной позиции Фьючерс USDT без даты экспирации (односторонний режим)
  {
      "category": "linear",
      "symbol": "BTCUSDT",
      "side": "Buy",
      "orderType": "Limit",
      "qty": "1",
      "price": "25000",
      "timeInForce": "GTC",
      "positionIdx": 0,
      "orderLinkId": "usdt-test-01",
      "reduceOnly": false,
      "takeProfit": "28000",
      "stopLoss": "20000",
      "tpslMode": "Partial",
      "tpOrderType": "Limit",
      "slOrderType": "Limit",
      "tpLimitPrice": "27500",
      "slLimitPrice": "20500"
  }

  // Закрытие короткой позиции Фьючерс USDT без даты экспирации (односторонний режим)
  {
      "category": "linear",
      "symbol": "BTCUSDT",
      "side": "Sell",
      "orderType": "Limit",
      "qty": "1",
      "price": "30000",
      "timeInForce": "GTC",
      "positionIdx": 0,
      "orderLinkId": "usdt-test-02",
      "reduceOnly": true
  }
  ```

- Python

  ```python
  import time
  import hmac
  import hashlib
  import json
  import requests

  base_url = "https://api-testnet.bybit.com"
  end_point = "/v5/order/create"
  complete_request = base_url + end_point

  api_key = "<api_key от биржи bybit>"
  secret_key = "<api_secret от биржи bybit>"
  time_stamp = str(int(time.time() * 1000))
  recv_window = "5000"

  data = {
      "category": "spot",
      "symbol": "BTCUSDT",
      "side": "Buy",
      "orderType": "Limit",
      "qty": "0.1",
      "price": "15600",
      "timeInForce": "PostOnly",
      "orderLinkId": "spot-test-postonly",
      "isLeverage": 0,
      "orderFilter": "Order"
  }

  param_str = time_stamp + api_key + recv_window + json.dumps(data, separators=(',', ':'))
  
  signature = hmac.new(
      key=secret_key.encode("utf-8"),
      msg=param_str.encode("utf-8"),
      digestmod=hashlib.sha256
  ).hexdigest()
  
  headers = {
    "X-BAPI-API-KEY": api_key,
    "X-BAPI-SIGN": signature,
    "X-BAPI-TIMESTAMP": time_stamp,
    "X-BAPI-RECV-WINDOW": recv_window,
  }

  response = requests.post(url=complete_request, headers=headers, json=data, timeout=10)

  print(response.json())
  ```

- pybit

  ```python
  from pybit.unified_trading import HTTP
  session = HTTP(
      testnet=True,
      api_key="<api_key от биржи bybit>",
      api_secret="<api_secret от биржи bybit>",
  )
  print(session.place_order(
      category="spot",
      symbol="BTCUSDT",
      side="Buy",
      orderType="Limit",
      qty="0.1",
      price="15600",
      timeInForce="PostOnly",
      orderLinkId="spot-test-postonly",
      isLeverage=0,
      orderFilter="Order",
  ))
  ```

<a id="параметры-запроса"></a>

## Параметры запроса

<big>фывфыв</big>
<b>фывфыв</b>
<u>фывфыв</u>

|Параметр  	                  |Обязательный	 |Тип  	  |Комментарии               |По умолчанию|
|-----------------------------|------------|----------|---------------------------|------------|
|[category](<../20.Определения значений в запросах и ответах.md#category>)	|да           |string    |Тип продукта:<br>classic account: `spot`, `linear`, `inverse`<br>UTA2.0, UTA1.0: `spot`, `linear`, `inverse`, `option`  |- |
|[symbol](<../20.Определения значений в запросах и ответах.md#symbol>)	    |да            |string    |Имя символа: `BTCUSDT`, только заглавными буквами   |-           |
|isLeverage  	                  |нет	 |integer   	  |Использовать заём. Только для спотовой торговли на едином счёте.<br>`0`: false — спотовая торговля<br>`1`: true — маржинальная торговля (убедитесь, что маржинальная торговля включена, и соответствующая валюта установлена в качестве залога).                       |`0`    |
|side  	                  |да	 |string   	  |`Buy`, `Sell`                       |-   |
|[orderType](#)  	                  |да	 |string   	  |`Market`, `Limit`                       |-    |
|qty  	                  |да	 |string   	  |Количество ордера.<br>- UTA аккаунт.<br>&ensp;&ensp;&ensp;- Спот: По умолчанию рыночный ордер на покупку по стоимости. Вы можете установить поле marketUnit, чтобы выбрать ордер по стоимости или количеству для рыночных ордеров.<br>&ensp;&ensp;&ensp;- Фьючерс c экспирацией и без, Option: всегда ордер по количеству<br>- Классический аккаунт<br>&ensp;&ensp;&ensp;- Спот: По умолчанию рыночный ордер на покупку по стоимости.<br>&ensp;&ensp;&ensp;- Фьючерс c экспирацией и без: всегда ордер по количеству.<br>- Фьючерс c экспирацией и без: если вы передадите `qty`="0" и укажете `reduceOnly`=`true` и `closeOnTrigger`=`true`, вы можете закрыть позицию до `maxMktOrderQty` или `maxOrderQty`, отображаемых в [Get Instruments](#) Info для текущего символа.                     |умолчанию|
|marketUnit  	                  |нет	 |string   	  |Выбор единицы измерения для `qty` при создании рыночных ордеров на спотовом рынке для счёта UTA.<br>Пример:<br>&ensp;&ensp;&ensp;- `baseCoin`: при покупке BTCUSDT единица "qty" - BTC<br>&ensp;&ensp;&ensp;- `quoteCoin`: при продаже BTCUSDT единица "qty" - USDT           |-   |
|slippageToleranceType  	      |нет	 |string   	  |Комментарии                       |умолчанию|
|slippageTolerance  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|price  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|triggerDirection  	                  |нет	 |integer   	  |Комментарии                       |умолчанию|
|orderFilter  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|triggerPrice  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|[triggerBy](#)    	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|orderIv  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|[timeInForce](#)    	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|[positionIdx](#)    	                  |нет	 |integer   	  |Комментарии                       |умолчанию|
|orderLinkId  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|takeProfit  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|stopLoss  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|[tpTriggerBy](#)    	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|[slTriggerBy](#)    	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|reduceOnly  	                  |нет	 |boolean   	  |Комментарии                       |умолчанию|
|closeOnTrigger  	                  |нет	 |boolean   	  |Комментарии                       |умолчанию|
|[smpType](#)   	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|mmp  	                  |нет	 |boolean   	  |Комментарии                       |умолчанию|
|tpslMode  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|tpLimitPrice  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|slLimitPrice  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|tpOrderType  	                  |нет	 |string   	  |Комментарии                       |умолчанию|
|slOrderType  	                  |нет	 |string   	  |Комментарии                       |умолчанию|

<a id="примеры-ответа"></a>

## Пример ответа

```json
{
    "retCode": 0,
    "retMsg": "OK",
    "result": {
        "orderId": "1321003749386327552",
        "orderLinkId": "spot-test-postonly"
    },
    "retExtInfo": {},
    "time": 1672211918471
}
```

<a id="параметры-ответа"></a>

## Параметры ответа

|Параметр  |Тип       |Комментарии                                             |
|----------|----------|--------------------------------------------------------|
|orderId  |string       |ID заказа                                             |
|orderLinkId  |string       |Пользовательский ID заказа                                             |

>Информация:  
>Подтверждение запроса на размещение ордера означает, что запрос был успешно принят. Этот запрос является асинхронным,
>поэтому для подтверждения статуса ордера используйте WebSocket.
